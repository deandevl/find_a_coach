import{_ as M,j as o,h as g,a as h,d as s,w as n,u as U,q as k,x as D,l as L,o as w,e as t,t as v,m as _,v as B,b as N,B as y,f as b,p as P}from"./index-DId_9kSd.js";import{B as q}from"./BaseCard-BmmNxyfy.js";import{B as F}from"./BaseSpinner-0euluOPU.js";const I={class:"form-control"},T={class:"form-control"},j={key:0},O={__name:"UserAuth",setup(z){const f=U(),x=k(),C=D(),l=o(""),r=o(""),i=o(!0),a=o("login"),d=o(!1),u=o(null);async function V(){if(i.value=!0,l.value===""||!l.value.includes("@")||r.value.lengh<6){i.value=!1;return}else{d.value=!0;const c={email:l.value,password:r.value};try{a.value==="login"?await f.dispatch("auth/login",c):await f.dispatch("auth/signup",c);const e="/"+(C.query.redirect||"coaches");x.replace(e)}catch(e){u.value=e.message||"Failed to authenticate, try later."}d.value=!1}}function A(){a.value==="login"?a.value="signup":a.value="login"}function R(){u.value=null}const S=g(()=>a.value==="login"?"Login":"Signup"),E=g(()=>a.value==="login"?"Signup instead":"Login instead");return(c,e)=>{const m=L("BaseDialog");return w(),h("div",null,[s(m,{show:!!u.value,title:"An Authentication Error Occurred!",onClose:R},{default:n(()=>[t("p",null,v(u.value),1)]),_:1},8,["show"]),s(m,{show:d.value,title:"Authenticating",fixed:""},{default:n(()=>[s(F)]),_:1},8,["show"]),s(q,null,{default:n(()=>[t("form",{onSubmit:P(V,["prevent"])},[t("div",I,[e[2]||(e[2]=t("label",{for:"email"},"E-Mail",-1)),_(t("input",{type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=p=>l.value=p)},null,512),[[B,l.value,void 0,{trim:!0}]])]),t("div",T,[e[3]||(e[3]=t("label",{for:"password"},"Password",-1)),_(t("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=p=>r.value=p)},null,512),[[B,r.value,void 0,{trim:!0}]])]),i.value?N("",!0):(w(),h("p",j," Please enter a valid email and password (must be at least 6 characters long). ")),s(y,null,{default:n(()=>[b(v(S.value),1)]),_:1}),s(y,{type:"button",mode:"flat",onClick:A},{default:n(()=>[b(v(E.value),1)]),_:1})],32)]),_:1})])}}},K=M(O,[["__scopeId","data-v-69cd8d6a"]]);export{K as default};
